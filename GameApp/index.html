<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1,minimum-scale=1,maximum-scale=1,user-scalable=no" />
    <title></title>
    <script src="js/mui.min.js"></script>
    <link href="css/mui.min.css" rel="stylesheet"/>
    <link rel="stylesheet" href="css/style.css" />
</head>
<body>
	<header class="mui-bar mui-bar-nav my-title">
	    <h1 class="mui-title my-title-color">首页</h1>
	</header>
	
	
	<nav class="mui-bar mui-bar-tab my-bar-tab" id="bottom-navigation">
	    <a class="mui-tab-item mui-active" tabindex="0">
	        <span class="mui-icon mui-icon-home"></span>
	        <span class="mui-tab-label">首页</span>
	    </a>
	    <a class="mui-tab-item" tabindex="1">
	        <span class="mui-icon mui-icon-phone"></span>
	        <span class="mui-tab-label">电话</span>
	    </a>
	    <a class="mui-tab-item" tabindex="2">
	        <span class="mui-icon mui-icon-email"></span>
	        <span class="mui-tab-label">邮件</span>
	    </a>
	    <a class="mui-tab-item" tabindex="3">
	        <span class="mui-icon mui-icon-gear"></span>
	        <span class="mui-tab-label">设置</span>
	    </a>
	</nav>
	
	<script type="text/javascript">
		
		var pages = [{
			id: "home.html",
			url: "home.html"
		},{
			id: "sala.html",
			url: "sala.html"
		},{
			id: "room.html",
			url: "room.html"
		},{
			id: "my.html",
			url: "my.html"
		}];
		
		
		mui.plusReady(function(){
			// 设置顶部状态栏样式
			plus.navigator.setStatusBarStyle("light");
			plus.navigator.setStatusBarBackground("#FE532A");
			
			
			// 初始化webView列表
			var defaultStyle = {
				top: "70px",
				bottom: "50px"
			}
			var currentWebView = plus.webview.currentWebview();
			// 动态创建webView对象
			for (var i = 0; i < pages.length; i++) {
				var page = plus.webview.create(pages[i].url
					,pages[i].id
					,defaultStyle)
				page.hide();
				currentWebView.append(page);
			}
			plus.webview.show(pages[0].id);
			
			// 注册TAB触摸事件
			mui(".mui-bar-tab").on("tap", "a", function(){
				var tabindex = this.getAttribute("tabindex");
				
				plus.webview.show(pages[tabindex].id, "fade-in", 200);
				for (var i = 0 ; i < pages.length ; i ++) {
					if (i != tabindex) {
						plus.webview.hide(pages[i].id, "fade-out", 200);
					}
				}
			})
			
		})
		
		/**
		 * 初始化所有的webView 韦德 2018年8月12日18:05:38
		 */
		function initWebViewList(){
			var defaultStyle = {
				top: "70px",
				bottom: "50px"
			}
			var currentWebView = plus.webview.currentWebview();
			// 动态创建webView对象
			for (var i = 0; i < pages.length; i++) {
				var page = plus.webview.create(pages[i].url
					,pages[i].id
					,defaultStyle)
				page.hide();
				currentWebView.append(page);
			}
			plus.webview.show(pages[0].id);
		}
		
		/**
		 * 显示指定的webView 韦德 2018年8月12日18:05:12
		 * @param {Object} tabindex
		 */
		function showWebView(tabindex){
			plus.webview.show(pages[tabindex].id, "fade-in", 200);
			hideOtherWebView(tabindex);
		}
		
		/**
		 * 隐藏非焦点webView 韦德 2018年8月12日18:05:23
		 * @param {Object} tabindex
		 */
		function hideOtherWebView(tabindex){
			for (var i = 0 ; i < pages.length ; i ++) {
					if (i != tabindex) {
						plus.webview.hide(pages[i].pageId, "fade-out", 200);
					}
			}
		}
	</script>
</body>
</html>